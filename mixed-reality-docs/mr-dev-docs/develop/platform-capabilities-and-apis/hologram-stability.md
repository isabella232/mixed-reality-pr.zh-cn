---
title: 全息影像稳定性
description: HoloLens 自动稳定全息影像，但开发人员可以执行一些步骤来进一步提高全息影像的稳定性。
author: thetuvix
ms.author: alexturn
ms.date: 07/08/2020
ms.topic: article
keywords: 全息影像、稳定性、全息影像、混合现实头戴显示设备、Windows 混合现实头戴显示设备、虚拟现实头戴显示设备、帧速率、渲染、重现、颜色分离
appliesto:
- HoloLens
ms.openlocfilehash: a4a22221d3238bb7dfed711e6ee1f11edc70238e
ms.sourcegitcommit: 12ea3fb2df4664c5efd07dcbb9040c2ff173afb6
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/29/2021
ms.locfileid: "113042288"
---
# <a name="hologram-stability"></a><span data-ttu-id="a70a5-104">全息影像稳定性</span><span class="sxs-lookup"><span data-stu-id="a70a5-104">Hologram stability</span></span>

<span data-ttu-id="a70a5-105">为了实现稳定的全息影像，HoloLens 具有内置的图像稳定管道。</span><span class="sxs-lookup"><span data-stu-id="a70a5-105">To achieve stable holograms, HoloLens has a built-in image stabilization pipeline.</span></span> <span data-ttu-id="a70a5-106">稳定管道在后台自动工作，因此无需执行任何额外的步骤来启用它。</span><span class="sxs-lookup"><span data-stu-id="a70a5-106">The stabilization pipeline works automatically in the background, so you don't need to take any extra steps to enable it.</span></span> <span data-ttu-id="a70a5-107">但是，应练习提高全息影像稳定性和避免降低稳定性的方案的技术。</span><span class="sxs-lookup"><span data-stu-id="a70a5-107">However, you should exercise techniques that improve hologram stability and avoid scenarios that reduce stability.</span></span>

## <a name="hologram-quality-terminology"></a><span data-ttu-id="a70a5-108">全息影像质量术语</span><span class="sxs-lookup"><span data-stu-id="a70a5-108">Hologram quality terminology</span></span>

<span data-ttu-id="a70a5-109">全息影像的质量是良好的环境和良好的应用开发的结果。</span><span class="sxs-lookup"><span data-stu-id="a70a5-109">The quality of holograms is a result of good environment and good app development.</span></span> <span data-ttu-id="a70a5-110">在 HoloLens 可以跟踪周围的环境中以恒定每秒 60 帧运行的应用可确保全息影像和匹配的坐标系保持同步。从用户的角度来看，旨在固定全息影像不会相对于环境移动。</span><span class="sxs-lookup"><span data-stu-id="a70a5-110">Apps running at a constant 60 frames-per-second in an environment where HoloLens can track the surroundings ensures the hologram and the matching coordinate system are in sync. From a user's perspective, holograms that are meant to be stationary won't move relative to the environment.</span></span>

<span data-ttu-id="a70a5-111">在识别环境问题、呈现速率不一致或低或其他任何内容时，以下术语可以帮助你。</span><span class="sxs-lookup"><span data-stu-id="a70a5-111">The following terminology can help you when you're identifying problems with the environment, inconsistent or low rendering rates, or anything else.</span></span>
* <span data-ttu-id="a70a5-112">**精度。**</span><span class="sxs-lookup"><span data-stu-id="a70a5-112">**Accuracy.**</span></span> <span data-ttu-id="a70a5-113">全息影像被世界锁定并放置在现实世界中后，它应保持相对于周围环境的放置位置，而不受用户运动或小型稀疏环境更改的影响。</span><span class="sxs-lookup"><span data-stu-id="a70a5-113">Once the hologram is world-locked and placed in the real world, it should stay where it's placed relative to the surrounding environment and independent of user motion or small and sparse environment changes.</span></span> <span data-ttu-id="a70a5-114">如果全息影像稍后出现在意外位置，则 *这是准确性问题* 。</span><span class="sxs-lookup"><span data-stu-id="a70a5-114">If a hologram later appears in an unexpected location, it's an *accuracy* problem.</span></span> <span data-ttu-id="a70a5-115">如果两个不同的房间看起来相同，可能会发生此类情况。</span><span class="sxs-lookup"><span data-stu-id="a70a5-115">Such scenarios can happen if two distinct rooms look identical.</span></span>
* <span data-ttu-id="a70a5-116">**抖动。**</span><span class="sxs-lookup"><span data-stu-id="a70a5-116">**Jitter.**</span></span> <span data-ttu-id="a70a5-117">用户观察到抖动是全息影像的高频率抖动，当环境的跟踪降级时，可能会发生这种情况。</span><span class="sxs-lookup"><span data-stu-id="a70a5-117">Users observe jitter as high frequency shaking of a hologram, which can happen when tracking of the environment degrades.</span></span> <span data-ttu-id="a70a5-118">对于用户，解决方案正在运行 [传感器优化](/hololens/hololens-updates)。</span><span class="sxs-lookup"><span data-stu-id="a70a5-118">For users, the solution is running [sensor tuning](/hololens/hololens-updates).</span></span>
* <span data-ttu-id="a70a5-119">**Judder。**</span><span class="sxs-lookup"><span data-stu-id="a70a5-119">**Judder.**</span></span> <span data-ttu-id="a70a5-120">低渲染频率会导致全息影像的不均匀运动和双倍图像。</span><span class="sxs-lookup"><span data-stu-id="a70a5-120">Low rendering frequencies result in uneven motion and double images of holograms.</span></span> <span data-ttu-id="a70a5-121">在具有动作的全息影像中，Judder 尤其明显。</span><span class="sxs-lookup"><span data-stu-id="a70a5-121">Judder is especially noticeable in holograms with motion.</span></span> <span data-ttu-id="a70a5-122">开发人员需要保持恒定 [的 60 FPS](hologram-stability.md#frame-rate)。</span><span class="sxs-lookup"><span data-stu-id="a70a5-122">Developers need to maintain a [constant 60 FPS](hologram-stability.md#frame-rate).</span></span>
* <span data-ttu-id="a70a5-123">**漂移。**</span><span class="sxs-lookup"><span data-stu-id="a70a5-123">**Drift.**</span></span> <span data-ttu-id="a70a5-124">用户看到偏移，因为全息影像似乎从最初放置的位置移开。</span><span class="sxs-lookup"><span data-stu-id="a70a5-124">Users see drift as a hologram appears to move away from where it was originally placed.</span></span> <span data-ttu-id="a70a5-125">将全息影像放在远离空间定位点的位置时，[](../../design/spatial-anchors.md)会发生偏移，尤其是在环境的未映射部分。</span><span class="sxs-lookup"><span data-stu-id="a70a5-125">Drift happens when you place holograms far away from [spatial anchors](../../design/spatial-anchors.md), particularly in unmapped parts of the environment.</span></span> <span data-ttu-id="a70a5-126">创建靠近空间定位点的全息影像可以降低偏移的可能性。</span><span class="sxs-lookup"><span data-stu-id="a70a5-126">Creating holograms close to spatial anchors lowers the likelihood of drift.</span></span>
* <span data-ttu-id="a70a5-127">**跳转。**</span><span class="sxs-lookup"><span data-stu-id="a70a5-127">**Jumpiness.**</span></span> <span data-ttu-id="a70a5-128">当全息影像偶尔"弹出"或"跳转"离开其位置时。</span><span class="sxs-lookup"><span data-stu-id="a70a5-128">When a hologram "pops" or "jumps" away from its location occasionally.</span></span> <span data-ttu-id="a70a5-129">当跟踪调整全息影像以匹配对环境的更新理解时，可能会出现跳转。</span><span class="sxs-lookup"><span data-stu-id="a70a5-129">Jumpiness can occur as tracking adjusts holograms to match updated understanding of your environment.</span></span>
* <span data-ttu-id="a70a5-130">**游泳。**</span><span class="sxs-lookup"><span data-stu-id="a70a5-130">**Swim.**</span></span> <span data-ttu-id="a70a5-131">当全息影像看起来与用户头部运动相对应时。</span><span class="sxs-lookup"><span data-stu-id="a70a5-131">When a hologram appears to sway corresponding to the motion of the user's head.</span></span> <span data-ttu-id="a70a5-132">如果应用程序尚未完全实现重新保护，并且 HoloLens 未为当前用户校准，则会发生流。 [](hologram-stability.md#reprojection) [](/hololens/hololens-calibration)</span><span class="sxs-lookup"><span data-stu-id="a70a5-132">Swim occurs when the application hasn't fully implemented [reprojection](hologram-stability.md#reprojection), and if the HoloLens isn't [calibrated](/hololens/hololens-calibration) for the current user.</span></span> <span data-ttu-id="a70a5-133">用户可以重新运行校准 [应用程序](/hololens/hololens-calibration) 来解决此问题。</span><span class="sxs-lookup"><span data-stu-id="a70a5-133">The user can rerun the [calibration](/hololens/hololens-calibration) application to fix the issue.</span></span> <span data-ttu-id="a70a5-134">开发人员可以更新稳定平面以进一步增强稳定性。</span><span class="sxs-lookup"><span data-stu-id="a70a5-134">Developers can update the stabilization plane to further enhance stability.</span></span>
* <span data-ttu-id="a70a5-135">**颜色分离。**</span><span class="sxs-lookup"><span data-stu-id="a70a5-135">**Color separation.**</span></span> <span data-ttu-id="a70a5-136">HoloLens 中的显示是颜色顺序显示，60 Hz 的红色-绿色-蓝-绿的闪烁颜色通道 (单个颜色字段以 240 Hz) 。</span><span class="sxs-lookup"><span data-stu-id="a70a5-136">The displays in HoloLens are color sequential displays, which flash color channels of red-green-blue-green at 60 Hz (individual color fields are shown at 240 Hz).</span></span> <span data-ttu-id="a70a5-137">每当用户用眼睛跟踪移动的全息影像时，该全息影像的前导和尾随边缘会以其构成颜色分开，从而产生一种闪烁效果。</span><span class="sxs-lookup"><span data-stu-id="a70a5-137">Whenever a user tracks a moving hologram with their eyes, that hologram's leading and trailing edges separate in their constituent colors, producing a rainbow effect.</span></span> <span data-ttu-id="a70a5-138">分离程度取决于全息影像的速度。</span><span class="sxs-lookup"><span data-stu-id="a70a5-138">The degree of separation is dependent upon the speed of the hologram.</span></span> <span data-ttu-id="a70a5-139">在某些极少数情况下，在查看固定全息影像时快速移动全息影像也会导致一种光栅效果，这称为 *["颜色分离"。](hologram-stability.md#color-separation)*</span><span class="sxs-lookup"><span data-stu-id="a70a5-139">In some rarer cases, moving ones head rapidly while looking at a stationary hologram can also result in a rainbow effect, which is called *[color separation](hologram-stability.md#color-separation)*.</span></span>

## <a name="frame-rate"></a><span data-ttu-id="a70a5-140">帧速率</span><span class="sxs-lookup"><span data-stu-id="a70a5-140">Frame rate</span></span>

<span data-ttu-id="a70a5-141">帧速率是全息影像稳定性的第一大支柱。</span><span class="sxs-lookup"><span data-stu-id="a70a5-141">Frame rate is the first pillar of hologram stability.</span></span> <span data-ttu-id="a70a5-142">若要让全息影像在世界上稳定显示，向用户呈现的每个图像都必须在正确的位置绘制全息影像。</span><span class="sxs-lookup"><span data-stu-id="a70a5-142">For holograms to appear stable in the world, each image presented to the user must have the holograms drawn in the correct spot.</span></span> <span data-ttu-id="a70a5-143">HoloLens 上的显示每秒刷新 240 次，显示每个新渲染的图像的四个单独的颜色字段，从而获得每秒 60 FPS (帧的用户体验) 。</span><span class="sxs-lookup"><span data-stu-id="a70a5-143">The displays on HoloLens refresh 240 times a second, showing four separate color fields for each newly rendered image, resulting in a user experience of 60 FPS (frames per second).</span></span> <span data-ttu-id="a70a5-144">为了尽可能提供最佳体验，应用程序开发人员必须维护 60 FPS，这转换为每 16 毫秒向操作系统提供一次新映像。</span><span class="sxs-lookup"><span data-stu-id="a70a5-144">To provide the best experience possible, application developers must maintain 60 FPS, which translates to consistently providing a new image to the operating system every 16 milliseconds.</span></span>

<span data-ttu-id="a70a5-145">**60 FPS** 若要绘制全息影像，使其看起来像在现实世界中，HoloLens 需要从用户的位置渲染图像。</span><span class="sxs-lookup"><span data-stu-id="a70a5-145">**60 FPS** To draw holograms to look like they're sitting in the real world, HoloLens needs to render images from the user's position.</span></span> <span data-ttu-id="a70a5-146">由于图像呈现需要时间，因此 HoloLens 预测当图像显示在显示器中时，用户的头部位置。</span><span class="sxs-lookup"><span data-stu-id="a70a5-146">Since image rendering takes time, HoloLens predicts where a user's head will be when the images are shown in the displays.</span></span> <span data-ttu-id="a70a5-147">但是，此预测算法是近似值。</span><span class="sxs-lookup"><span data-stu-id="a70a5-147">However, this prediction algorithm is an approximation.</span></span> <span data-ttu-id="a70a5-148">HoloLens 的硬件可调整呈现的图像，以考虑预测的头位置与实际头部位置之间的差异。</span><span class="sxs-lookup"><span data-stu-id="a70a5-148">HoloLens has hardware that adjusts the rendered image to account for the discrepancy between the predicted head position and the actual head position.</span></span> <span data-ttu-id="a70a5-149">调整会使用户看到的图像看起来就像从正确的位置呈现一样，并且全息影像感觉稳定。</span><span class="sxs-lookup"><span data-stu-id="a70a5-149">The adjustment makes the image the user sees appear as if it's rendered from the correct location, and holograms feel stable.</span></span> <span data-ttu-id="a70a5-150">图像更新最适合进行少量更改，并且无法完全修复呈现的图像中的某些内容，如运动视差。</span><span class="sxs-lookup"><span data-stu-id="a70a5-150">The image updates work best with small changes, and it can't completely fix certain things in the rendered image like motion-parallax.</span></span>

<span data-ttu-id="a70a5-151">通过以 60 FPS 呈现，你将执行三项操作来帮助制作稳定的全息影像：</span><span class="sxs-lookup"><span data-stu-id="a70a5-151">By rendering at 60 FPS, you're doing three things to help make stable holograms:</span></span>
1. <span data-ttu-id="a70a5-152">最大程度地降低呈现图像与用户看到的图像之间的总体延迟。</span><span class="sxs-lookup"><span data-stu-id="a70a5-152">Minimizing the overall latency between rendering an image and that image being seen by the user.</span></span> <span data-ttu-id="a70a5-153">在具有游戏且呈现线程在锁步中运行的引擎中，以 30FPS 运行可能会增加 33.3 毫秒的额外延迟。</span><span class="sxs-lookup"><span data-stu-id="a70a5-153">In an engine with a game and a render thread running in lockstep, running at 30FPS can add 33.3 ms of extra latency.</span></span> <span data-ttu-id="a70a5-154">降低延迟可减少预测错误，提高全息影像稳定性。</span><span class="sxs-lookup"><span data-stu-id="a70a5-154">Reducing latency decreases prediction error and increases hologram stability.</span></span>
2. <span data-ttu-id="a70a5-155">这样，到达用户眼睛的每张图像都有一致的延迟量。</span><span class="sxs-lookup"><span data-stu-id="a70a5-155">Making it so every image reaching the user's eyes have a consistent amount of latency.</span></span> <span data-ttu-id="a70a5-156">如果以 30 fps 呈现，则显示器仍以 60 FPS 显示图像，这意味着同一图像将在一行中显示两次。</span><span class="sxs-lookup"><span data-stu-id="a70a5-156">If you render at 30 fps, the display still displays images at 60 FPS, meaning the same image will be displayed twice in a row.</span></span> <span data-ttu-id="a70a5-157">第二帧的延迟比第一帧多 16.6 毫秒，并且必须更正更明显的错误量。</span><span class="sxs-lookup"><span data-stu-id="a70a5-157">The second frame will have 16.6-ms more latency than the first frame and will have to correct a more pronounced amount of error.</span></span> <span data-ttu-id="a70a5-158">错误量级中的这种不一致可能会导致不需要的 60 Hz 放大器。</span><span class="sxs-lookup"><span data-stu-id="a70a5-158">This inconsistency in error magnitude can cause unwanted 60 Hz judder.</span></span>
3. <span data-ttu-id="a70a5-159">减轻视觉上的抖动，其特征是运动不均衡和重影。</span><span class="sxs-lookup"><span data-stu-id="a70a5-159">Reducing the appearance of judder, which is characterized by uneven motion and double images.</span></span> <span data-ttu-id="a70a5-160">全息影像运动速度越快且渲染速率越低，抖动就越明显。</span><span class="sxs-lookup"><span data-stu-id="a70a5-160">Faster hologram motion and lower render rates are associated with more pronounced judder.</span></span> <span data-ttu-id="a70a5-161">如果始终保持 60 FPS，将有助于避免给定移动全息影像的灰度。</span><span class="sxs-lookup"><span data-stu-id="a70a5-161">Striving to maintain 60 FPS at all times will help avoid judder for a given moving hologram.</span></span>

<span data-ttu-id="a70a5-162">**帧速率一致性** 帧速率一致性与每秒高帧数一样重要。</span><span class="sxs-lookup"><span data-stu-id="a70a5-162">**Frame-rate consistency** Frame rate consistency is as important as a high frames-per-second.</span></span> <span data-ttu-id="a70a5-163">对于内容丰富的应用程序，偶尔丢弃的帧都无可避免，HoloLens 实现了一些复杂的算法，以从偶尔的故障中恢复。</span><span class="sxs-lookup"><span data-stu-id="a70a5-163">Occasionally dropped frames are inevitable for any content-rich application, and the HoloLens implements some sophisticated algorithms to recover from occasional glitches.</span></span> <span data-ttu-id="a70a5-164">但是，不断波动的帧速率比以较低的帧速率持续运行更明显。</span><span class="sxs-lookup"><span data-stu-id="a70a5-164">However, a constantly fluctuating framerate is a lot more noticeable to a user than running consistently at lower frame rates.</span></span> <span data-ttu-id="a70a5-165">例如，如果应用程序在这五个帧) 的持续时间内平滑呈现五帧 (60 FPS，然后在这 1) 0 帧 (30 FPS 内每隔一帧删除 30 FPS，则该应用程序看起来比以 30 FPS 一致呈现的应用程序更加不稳定。</span><span class="sxs-lookup"><span data-stu-id="a70a5-165">For example, an application that renders smoothly for five frames (60 FPS for the duration of these five frames) and then drops every other frame for the next 10 frames (30 FPS for the duration of these 10 frames) will appear more unstable than an application that consistently renders at 30 FPS.</span></span>

<span data-ttu-id="a70a5-166">在相关说明中，当混合现实捕获运行时，操作系统将应用程序限制为 30 FPS。 [](/hololens/holographic-photos-and-videos)</span><span class="sxs-lookup"><span data-stu-id="a70a5-166">On a related note, the operating system throttles down applications to 30 FPS when [mixed reality capture](/hololens/holographic-photos-and-videos) is running.</span></span>

<span data-ttu-id="a70a5-167">**性能分析** 有不同类型的工具可用于对应用程序帧速率进行基准测试，例如：</span><span class="sxs-lookup"><span data-stu-id="a70a5-167">**Performance analysis** There are different kinds of tools that can be used to benchmark your application frame rate, such as:</span></span>
* <span data-ttu-id="a70a5-168">GPUView</span><span class="sxs-lookup"><span data-stu-id="a70a5-168">GPUView</span></span>
* <span data-ttu-id="a70a5-169">Visual Studio 图形调试器</span><span class="sxs-lookup"><span data-stu-id="a70a5-169">Visual Studio Graphics Debugger</span></span>
* <span data-ttu-id="a70a5-170">内置于 3D 引擎（如 Unity）的探查器</span><span class="sxs-lookup"><span data-stu-id="a70a5-170">Profilers built into 3D engines such as Unity</span></span>

## <a name="hologram-render-distances"></a><span data-ttu-id="a70a5-171">全息影像呈现距离</span><span class="sxs-lookup"><span data-stu-id="a70a5-171">Hologram render distances</span></span>

>[!VIDEO https://www.youtube.com/embed/-606oZKLa_s]

<span data-ttu-id="a70a5-172">人类视觉系统在固定并专注于对象时集成多个与距离相关的信号。</span><span class="sxs-lookup"><span data-stu-id="a70a5-172">The human visual system integrates multiple distance-dependent signals when it fixates and focuses on an object.</span></span>
* <span data-ttu-id="a70a5-173">[调整](https://en.wikipedia.org/wiki/Accommodation_%28eye%29) - 单个眼睛的焦点。</span><span class="sxs-lookup"><span data-stu-id="a70a5-173">[Accommodation](https://en.wikipedia.org/wiki/Accommodation_%28eye%29) - The focus of an individual eye.</span></span>
* <span data-ttu-id="a70a5-174">[收](https://en.wikipedia.org/wiki/Convergence_(eye)) 敛 - 两只眼睛在对象上向内或向外移动。</span><span class="sxs-lookup"><span data-stu-id="a70a5-174">[Convergence](https://en.wikipedia.org/wiki/Convergence_(eye)) - Two eyes moving inward or outward to center on an object.</span></span>
* <span data-ttu-id="a70a5-175">[双眼视觉](https://en.wikipedia.org/wiki/Stereopsis) - 依赖于对象与固定点的距离的左眼和右眼图像的差异。</span><span class="sxs-lookup"><span data-stu-id="a70a5-175">[Binocular vision](https://en.wikipedia.org/wiki/Stereopsis) - Disparities between the left- and right-eye images that are dependent on an object's distance away from your fixation point.</span></span>
* <span data-ttu-id="a70a5-176">着色、相对角大小和其他单眼 (视觉) 提示。</span><span class="sxs-lookup"><span data-stu-id="a70a5-176">Shading, relative angular size, and other monocular (single eye) cues.</span></span>

<span data-ttu-id="a70a5-177">收敛和调整是唯一的，因为它们的额外视素提示与眼睛如何改变以不同距离感知对象有关。</span><span class="sxs-lookup"><span data-stu-id="a70a5-177">Convergence and accommodation are unique because their extra-retinal cues related to how the eyes change to perceive objects at different distances.</span></span> <span data-ttu-id="a70a5-178">在自然观看中，收敛和调整是链接的。</span><span class="sxs-lookup"><span data-stu-id="a70a5-178">In natural viewing, convergence and accommodation are linked.</span></span> <span data-ttu-id="a70a5-179">例如，当眼睛看到 (，你的眼睛) ，眼睛交叉并适应近点。</span><span class="sxs-lookup"><span data-stu-id="a70a5-179">When the eyes view something near (for example, your nose), the eyes cross and accommodate to a near point.</span></span> <span data-ttu-id="a70a5-180">当眼睛在无穷大看到某些内容时，眼睛变为并行，眼睛适应无穷大。</span><span class="sxs-lookup"><span data-stu-id="a70a5-180">When the eyes view something at infinity, the eyes become parallel and the eye accommodates to infinity.</span></span> 

<span data-ttu-id="a70a5-181">使用 HoloLens 的用户将始终适应 2.0 米以保持清晰的图像，因为 HoloLens 显示器固定在距离用户约 2.0 米的光学距离上。</span><span class="sxs-lookup"><span data-stu-id="a70a5-181">Users wearing HoloLens will always accommodate to 2.0 m to maintain a clear image because the HoloLens displays are fixed at an optical distance approximately 2.0 m away from the user.</span></span> <span data-ttu-id="a70a5-182">应用开发人员通过将内容和全息影像放置在各种深度来控制用户眼睛的聚合位置。</span><span class="sxs-lookup"><span data-stu-id="a70a5-182">App developers control where users' eyes converge by placing content and holograms at various depths.</span></span> <span data-ttu-id="a70a5-183">当用户适应并聚合到不同的距离时，这两个提示之间的自然链接会断开，这可能会导致视觉障碍，尤其是在冲突量很大时。</span><span class="sxs-lookup"><span data-stu-id="a70a5-183">When users accommodate and converge to different distances, the natural link between the two cues is broken, which can lead to visual discomfort or fatigue, especially when the magnitude of the conflict is large.</span></span> 

<span data-ttu-id="a70a5-184">通过尽可能将聚合内容保持为接近 2.0 米（即，在具有大量深度的场景中）将兴趣区域放在约 2. (0 米的位置（如果可能) ）可以避免或最小化来自自我调整-适应冲突的风险。</span><span class="sxs-lookup"><span data-stu-id="a70a5-184">Discomfort from the vergence-accommodation conflict can be avoided or minimized by keeping converged content as close to 2.0 m as possible (that is, in a scene with lots of depth place the areas of interest near 2.0 m, when possible).</span></span> <span data-ttu-id="a70a5-185">当无法将内容放在 2.0 米附近时，当用户在不同距离之间来回凝视时，来自自我适应冲突的症状最大。</span><span class="sxs-lookup"><span data-stu-id="a70a5-185">When content can't be placed near 2.0 m, discomfort from the vergence-accommodation conflict is greatest when user’s gaze back and forth between different distances.</span></span> <span data-ttu-id="a70a5-186">换言之，观看 50 厘米远的静态全息影像，比观看 50 厘米远的前后不断移动的全息影像要舒适得多。</span><span class="sxs-lookup"><span data-stu-id="a70a5-186">In other words, it's much more comfortable to look at a stationary hologram that stays 50 cm away than to look at a hologram 50 cm away that moves toward and away from you over time.</span></span>

<span data-ttu-id="a70a5-187">将内容放在 2.0 米位置也有利，因为两个显示器设计为在此距离完全重叠。</span><span class="sxs-lookup"><span data-stu-id="a70a5-187">Placing content at 2.0 m is also advantageous because the two displays are designed to fully overlap at this distance.</span></span> <span data-ttu-id="a70a5-188">对于放置在此平面上的图像，当图像从全息帧的一侧移开时，它们会显示在一个显示器上，而在其他显示器上仍可见。</span><span class="sxs-lookup"><span data-stu-id="a70a5-188">For images placed off this plane, as they move off the side of the holographic frame they'll appear from one display while still being visible on the other.</span></span> <span data-ttu-id="a70a5-189">这种二眼性功能可能会干扰全息影像的深度感知。</span><span class="sxs-lookup"><span data-stu-id="a70a5-189">This binocular rivalry can be disruptive to the depth perception of the hologram.</span></span>

<span data-ttu-id="a70a5-190">**全息影像与用户之间的最佳距离**</span><span class="sxs-lookup"><span data-stu-id="a70a5-190">**Optimal distance for placing holograms from the user**</span></span>

![全息影像与用户之间的最佳距离](images/distanceguiderendering-750px.png)

<span data-ttu-id="a70a5-192">**剪贴平面** 为获得最大舒适感，我们建议将渲染距离剪裁为 85 cm，从 1 米开始淡出内容。</span><span class="sxs-lookup"><span data-stu-id="a70a5-192">**Clip Planes** For maximum comfort, we recommend clipping render distance at 85 cm with fade out of content starting at 1 m.</span></span> <span data-ttu-id="a70a5-193">在全息影像和用户都处于固定状态的应用程序中，可以非常轻松地查看接近 50 cm 的全息影像。在这种情况下，应用程序应放置不超过 30 cm 的剪贴平面，淡出应从剪辑平面开始至少 10 cm。</span><span class="sxs-lookup"><span data-stu-id="a70a5-193">In applications where holograms and users are both stationary, holograms can be viewed comfortably as near as 50 cm. In those cases, applications should place a clip plane no closer than 30 cm and fade out should start at least 10 cm away from the clip plane.</span></span> <span data-ttu-id="a70a5-194">每当内容接近 85 cm 时，必须确保用户不经常离全息影像更近或更远，或者全息影像不会频繁靠近或远离用户，因为这些情况最有可能导致与行为-适应冲突产生不便。</span><span class="sxs-lookup"><span data-stu-id="a70a5-194">Whenever content is closer than 85 cm, it's important to ensure that users don't frequently move closer or farther from holograms or that holograms don't frequently move closer to or farther from the user as these situations are most likely to cause discomfort from the vergence-accommodation conflict.</span></span> <span data-ttu-id="a70a5-195">内容应设计为最大程度地减少与用户距离不超过 85 cm 的交互需求，但当内容必须呈现接近 85 cm 时，开发人员的一个良好经验法则是设计用户和/或全息影像在 25% 以上的时间深度移动的方案。</span><span class="sxs-lookup"><span data-stu-id="a70a5-195">Content should be designed to minimize the need for interaction closer than 85 cm from the user, but when content must be rendered closer than 85 cm, a good rule of thumb for developers is to design scenarios where users and/or holograms don't move in depth more than 25% of the time.</span></span>

<span data-ttu-id="a70a5-196">**最佳做法** 如果全息影像不能放置在 2 米，并且无法避免收敛和调整之间的冲突，则全息影像放置的最佳区域介于 1.25 米到 5 米之间。</span><span class="sxs-lookup"><span data-stu-id="a70a5-196">**Best practices** When holograms can't be placed at 2 m and conflicts between convergence and accommodation can't be avoided, the optimal zone for hologram placement is between 1.25 m and 5 m.</span></span> <span data-ttu-id="a70a5-197">在每种情况下，设计者都应构建内容，以鼓励用户在 1 米 (交互，例如，调整内容大小和默认放置) 。</span><span class="sxs-lookup"><span data-stu-id="a70a5-197">In every case, designers should structure content to encourage users to interact 1+ m away (for example, adjust content size and default placement parameters).</span></span>

## <a name="reprojection"></a><span data-ttu-id="a70a5-198">重新保护</span><span class="sxs-lookup"><span data-stu-id="a70a5-198">Reprojection</span></span>
<span data-ttu-id="a70a5-199">HoloLens 具有一种复杂的硬件辅助全息稳定技术，称为重新投影。</span><span class="sxs-lookup"><span data-stu-id="a70a5-199">HoloLens has a sophisticated hardware-assisted holographic stabilization technique known as reprojection.</span></span> <span data-ttu-id="a70a5-200">当场景进行动画处理和用户移动其头部时，重新 (会考虑 CameraPose) 运动和视点更改。</span><span class="sxs-lookup"><span data-stu-id="a70a5-200">Reprojection takes into account motion and change of the point of view (CameraPose) as the scene animates and the user moves their head.</span></span>  <span data-ttu-id="a70a5-201">应用程序需要执行特定操作才能充分利用 reprojection。</span><span class="sxs-lookup"><span data-stu-id="a70a5-201">Applications need to take specific actions to best use reprojection.</span></span>


<span data-ttu-id="a70a5-202">有四种主要类型的 reprojection</span><span class="sxs-lookup"><span data-stu-id="a70a5-202">There are four main types of reprojection</span></span>
* <span data-ttu-id="a70a5-203">**深度 Reprojection：**  从应用程序生成最少工作量的最佳结果。</span><span class="sxs-lookup"><span data-stu-id="a70a5-203">**Depth Reprojection:**  Produces the best results with the least amount of effort from the application.</span></span>  <span data-ttu-id="a70a5-204">呈现的场景的所有部分都基于用户与用户之间的距离进行了单独的稳定。</span><span class="sxs-lookup"><span data-stu-id="a70a5-204">All parts of the rendered scene are independently stabilized based on their distance from the user.</span></span>  <span data-ttu-id="a70a5-205">某些呈现项目在深度变化时可能会可见。</span><span class="sxs-lookup"><span data-stu-id="a70a5-205">Some rendering artifacts may be visible where there are sharp changes in depth.</span></span>  <span data-ttu-id="a70a5-206">此选项仅在 HoloLens 2 和沉浸式耳机上可用。</span><span class="sxs-lookup"><span data-stu-id="a70a5-206">This option is only available on HoloLens 2 and Immersive Headsets.</span></span>
* <span data-ttu-id="a70a5-207">**平面 Reprojection：**  允许应用程序精确控制稳定。</span><span class="sxs-lookup"><span data-stu-id="a70a5-207">**Planar Reprojection:**  Allows the application precise control over stabilization.</span></span>  <span data-ttu-id="a70a5-208">平面由应用程序设置，该平面上的所有内容将是场景中最稳定的部分。</span><span class="sxs-lookup"><span data-stu-id="a70a5-208">A plane is set by the application and everything on that plane will be the most stable part of the scene.</span></span>  <span data-ttu-id="a70a5-209">全息图离飞机的更好，就是不太稳定。</span><span class="sxs-lookup"><span data-stu-id="a70a5-209">The further a hologram is away from the plane, the less stable it will be.</span></span>  <span data-ttu-id="a70a5-210">此选项在所有 Windows MR 平台上可用。</span><span class="sxs-lookup"><span data-stu-id="a70a5-210">This option is available on all Windows MR platforms.</span></span>
* <span data-ttu-id="a70a5-211">**自动平面 Reprojection：**  系统使用深度缓冲区中的信息设置稳定平面。</span><span class="sxs-lookup"><span data-stu-id="a70a5-211">**Automatic Planar Reprojection:**  The system sets a stabilization plane using information in the depth buffer.</span></span>  <span data-ttu-id="a70a5-212">此选项在 HoloLens 第1代和 HoloLens 2 上可用。</span><span class="sxs-lookup"><span data-stu-id="a70a5-212">This option is available on HoloLens generation 1 and HoloLens 2.</span></span>
* <span data-ttu-id="a70a5-213">**无：** 如果应用程序不执行任何操作，则会在用户的打印头注视方向上，将平面 Reprojection 与以2米固定的稳定平面一起使用，通常会生成未达标准的结果。</span><span class="sxs-lookup"><span data-stu-id="a70a5-213">**None:** If the application does nothing, Planar Reprojection is used with the stabilization plane fixed at 2 meters in the direction of the user's head gaze, usually producing substandard results.</span></span>

<span data-ttu-id="a70a5-214">应用程序需要执行特定操作才能启用不同类型的 reprojection</span><span class="sxs-lookup"><span data-stu-id="a70a5-214">Applications need to take specific actions to enable the different types of reprojection</span></span>
* <span data-ttu-id="a70a5-215">**深度 Reprojection：** 应用程序将每个呈现的帧的深度缓冲区提交给系统。</span><span class="sxs-lookup"><span data-stu-id="a70a5-215">**Depth Reprojection:** The application submits their depth buffer to the system for every rendered frame.</span></span>  <span data-ttu-id="a70a5-216">在 Unity 上，在 " **XR 插件管理**" 下的 " **Windows Mixed Reality 设置**" 窗格中，通过 "**共享深度缓冲区**" 选项完成深度 Reprojection。</span><span class="sxs-lookup"><span data-stu-id="a70a5-216">On Unity, Depth Reprojection is done with the **Shared Depth Buffer** option in the **Windows Mixed Reality Settings** pane under **XR Plugin Management**.</span></span>  <span data-ttu-id="a70a5-217">DirectX 应用调用 CommitDirect3D11DepthBuffer。</span><span class="sxs-lookup"><span data-stu-id="a70a5-217">DirectX apps call CommitDirect3D11DepthBuffer.</span></span>  <span data-ttu-id="a70a5-218">应用程序不应调用 SetFocusPoint。</span><span class="sxs-lookup"><span data-stu-id="a70a5-218">The application shouldn't call SetFocusPoint.</span></span>
* <span data-ttu-id="a70a5-219">**平面 Reprojection：** 在每个帧上，应用程序会告诉系统要稳定的平面位置。</span><span class="sxs-lookup"><span data-stu-id="a70a5-219">**Planar Reprojection:** On every frame, applications tell the system the location of a plane to stabilize.</span></span>  <span data-ttu-id="a70a5-220">Unity 应用程序调用 SetFocusPointForFrame，并应禁用 **共享深度缓冲** 。</span><span class="sxs-lookup"><span data-stu-id="a70a5-220">Unity applications call SetFocusPointForFrame and should have **Shared Depth Buffer** disabled.</span></span>  <span data-ttu-id="a70a5-221">DirectX 应用调用 SetFocusPoint，不应调用 CommitDirect3D11DepthBuffer。</span><span class="sxs-lookup"><span data-stu-id="a70a5-221">DirectX apps call SetFocusPoint and shouldn't call CommitDirect3D11DepthBuffer.</span></span>
* <span data-ttu-id="a70a5-222">**自动平面 Reprojection：** 若要启用，应用程序需要将其深度缓冲区提交给系统，因为它们的深度 Reprojection。</span><span class="sxs-lookup"><span data-stu-id="a70a5-222">**Automatic Planar Reprojection:** To enable, the application needs to submit their depth buffer to the system as they would for Depth Reprojection.</span></span> <span data-ttu-id="a70a5-223">使用混合现实工具包 (MRTK) 的应用可以将 [照相机设置提供程序](/windows/mixed-reality/mrtk-unity/features/camera-system/windows-mixed-reality-camera-settings#hololens-2-reprojection-method) 配置为使用 AutoPlanar Reprojection。</span><span class="sxs-lookup"><span data-stu-id="a70a5-223">Apps using the Mixed Reality Toolkit (MRTK) can configure the [camera settings provider](/windows/mixed-reality/mrtk-unity/features/camera-system/windows-mixed-reality-camera-settings#hololens-2-reprojection-method) to use AutoPlanar Reprojection.</span></span> <span data-ttu-id="a70a5-224">本机应用应将 `DepthReprojectionMode` [HolographicCameraRenderingParameters](/uwp/api/windows.graphics.holographic.holographiccamerarenderingparameters) 中的设置为 `AutoPlanar` 每个框架。</span><span class="sxs-lookup"><span data-stu-id="a70a5-224">Native apps should set the `DepthReprojectionMode` in the [HolographicCameraRenderingParameters](/uwp/api/windows.graphics.holographic.holographiccamerarenderingparameters) to `AutoPlanar` each frame.</span></span> <span data-ttu-id="a70a5-225">对于 HoloLens 第1代，应用程序不应调用 SetFocusPoint。</span><span class="sxs-lookup"><span data-stu-id="a70a5-225">For HoloLens generation 1, the application should not call SetFocusPoint.</span></span>

### <a name="choosing-reprojection-technique"></a><span data-ttu-id="a70a5-226">选择 Reprojection 技术</span><span class="sxs-lookup"><span data-stu-id="a70a5-226">Choosing Reprojection Technique</span></span>

<span data-ttu-id="a70a5-227">稳定类型</span><span class="sxs-lookup"><span data-stu-id="a70a5-227">Stabilization Type</span></span> |    <span data-ttu-id="a70a5-228">沉浸式头戴显示设备</span><span class="sxs-lookup"><span data-stu-id="a70a5-228">Immersive Headsets</span></span> |    <span data-ttu-id="a70a5-229">HoloLens 第1代</span><span class="sxs-lookup"><span data-stu-id="a70a5-229">HoloLens generation 1</span></span> | <span data-ttu-id="a70a5-230">HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="a70a5-230">HoloLens 2</span></span>
--- | --- | --- | ---
<span data-ttu-id="a70a5-231">深度 Reprojection</span><span class="sxs-lookup"><span data-stu-id="a70a5-231">Depth Reprojection</span></span> |    <span data-ttu-id="a70a5-232">建议</span><span class="sxs-lookup"><span data-stu-id="a70a5-232">Recommended</span></span> |   <span data-ttu-id="a70a5-233">空值</span><span class="sxs-lookup"><span data-stu-id="a70a5-233">N/A</span></span> |   <span data-ttu-id="a70a5-234">建议</span><span class="sxs-lookup"><span data-stu-id="a70a5-234">Recommended</span></span><br/><br/><span data-ttu-id="a70a5-235">Unity 应用程序必须使用 Unity 2018.4.12 +、Unity 2019.3 + 或 Unity 2020.3 +。</span><span class="sxs-lookup"><span data-stu-id="a70a5-235">Unity applications must use Unity 2018.4.12+, Unity 2019.3+ or Unity 2020.3+.</span></span> <span data-ttu-id="a70a5-236">否则，请使用自动平面 Reprojection。</span><span class="sxs-lookup"><span data-stu-id="a70a5-236">Otherwise use Automatic Planar Reprojection.</span></span>
<span data-ttu-id="a70a5-237">自动平面 Reprojection</span><span class="sxs-lookup"><span data-stu-id="a70a5-237">Automatic Planar Reprojection</span></span> | <span data-ttu-id="a70a5-238">空值</span><span class="sxs-lookup"><span data-stu-id="a70a5-238">N/A</span></span> |   <span data-ttu-id="a70a5-239">建议默认值</span><span class="sxs-lookup"><span data-stu-id="a70a5-239">Recommended default</span></span> |   <span data-ttu-id="a70a5-240">如果深度 Reprojection 未提供最佳结果，建议使用</span><span class="sxs-lookup"><span data-stu-id="a70a5-240">Recommended if Depth Reprojection isn't giving the best results</span></span><br/><br/><span data-ttu-id="a70a5-241">建议 unity 应用程序使用 Unity 2018.4.12 +、Unity 2019.3 + 或 Unity 2020.3 +。</span><span class="sxs-lookup"><span data-stu-id="a70a5-241">Unity applications are recommended to use Unity 2018.4.12+, Unity 2019.3+ or Unity 2020.3+.</span></span>  <span data-ttu-id="a70a5-242">以前的 Unity 版本将使用略微降级的 reprojection 结果。</span><span class="sxs-lookup"><span data-stu-id="a70a5-242">Previous Unity versions will work with slightly degraded reprojection results.</span></span>
<span data-ttu-id="a70a5-243">平面 Reprojection</span><span class="sxs-lookup"><span data-stu-id="a70a5-243">Planar Reprojection</span></span> |   <span data-ttu-id="a70a5-244">不建议使用</span><span class="sxs-lookup"><span data-stu-id="a70a5-244">Not Recommended</span></span> |   <span data-ttu-id="a70a5-245">如果自动平面未提供最佳结果，建议使用</span><span class="sxs-lookup"><span data-stu-id="a70a5-245">Recommended if Automatic Planar isn't giving the best results</span></span> | <span data-ttu-id="a70a5-246">如果两个深度选项都不能获得所需的结果，请使用</span><span class="sxs-lookup"><span data-stu-id="a70a5-246">Use if neither of the depth options give desired results</span></span>    

### <a name="verifying-depth-is-set-correctly"></a><span data-ttu-id="a70a5-247">验证深度设置正确</span><span class="sxs-lookup"><span data-stu-id="a70a5-247">Verifying Depth is Set Correctly</span></span>
            
<span data-ttu-id="a70a5-248">当 reprojection 方法使用深度缓冲区时，验证深度缓冲区的内容是否表示应用程序的呈现场景很重要。</span><span class="sxs-lookup"><span data-stu-id="a70a5-248">When a reprojection method uses the depth buffer, it's important to verify the contents of the depth buffer represent the application's rendered scene.</span></span>  <span data-ttu-id="a70a5-249">许多因素可能导致问题。</span><span class="sxs-lookup"><span data-stu-id="a70a5-249">A number of factors can cause problems.</span></span> <span data-ttu-id="a70a5-250">例如，如果有另一个相机用于渲染用户界面覆盖，则可能会覆盖实际视图中的所有深度信息。</span><span class="sxs-lookup"><span data-stu-id="a70a5-250">If there's a second camera used to render user interface overlays, for example, it's likely to overwrite all the depth information from the actual view.</span></span>  <span data-ttu-id="a70a5-251">透明对象通常不会设置深度。</span><span class="sxs-lookup"><span data-stu-id="a70a5-251">Transparent objects often don't set depth.</span></span>  <span data-ttu-id="a70a5-252">某些文本呈现默认情况下不设置深度。</span><span class="sxs-lookup"><span data-stu-id="a70a5-252">Some text rendering won't set depth by default.</span></span>  <span data-ttu-id="a70a5-253">当深度与呈现的全息影像不匹配时，呈现会出现明显的问题。</span><span class="sxs-lookup"><span data-stu-id="a70a5-253">There will be visible glitches in the rendering when depth doesn't match the rendered holograms.</span></span>
            
<span data-ttu-id="a70a5-254">HoloLens 2 有一个可视化工具，用于显示深度的位置和未设置，可从设备门户启用。</span><span class="sxs-lookup"><span data-stu-id="a70a5-254">HoloLens 2 has a visualizer to show where depth is and isn't being set, which can be enabled from Device Portal.</span></span>  <span data-ttu-id="a70a5-255">在 "**查看**  >  **全息图稳定性**" 选项卡上，选择 "**在耳机中显示深度可视化**" 复选框。</span><span class="sxs-lookup"><span data-stu-id="a70a5-255">On the **Views** > **Hologram Stability** tab, select the **Display depth visualization in headset** checkbox.</span></span>  <span data-ttu-id="a70a5-256">深度设置正确的区域将为蓝色。</span><span class="sxs-lookup"><span data-stu-id="a70a5-256">Areas that have depth set properly will be blue.</span></span>  <span data-ttu-id="a70a5-257">没有深度集的呈现项将标记为红色，需要修复。</span><span class="sxs-lookup"><span data-stu-id="a70a5-257">Rendered items that don't have depth set are marked in red and need to be fixed.</span></span>  

> [!NOTE]
> <span data-ttu-id="a70a5-258">视觉对象的视觉对象将不会在混合现实捕获中显示。</span><span class="sxs-lookup"><span data-stu-id="a70a5-258">The visualization of the depth will not show up in Mixed Reality Capture.</span></span>  <span data-ttu-id="a70a5-259">它仅在设备上可见。</span><span class="sxs-lookup"><span data-stu-id="a70a5-259">It is only visible through the device.</span></span>
            
<span data-ttu-id="a70a5-260">某些 GPU 查看工具将允许可视化深度缓冲区。</span><span class="sxs-lookup"><span data-stu-id="a70a5-260">Some GPU viewing tools will allow visualization of the depth buffer.</span></span>  <span data-ttu-id="a70a5-261">应用程序开发人员可以使用这些工具来确保正确设置深度。</span><span class="sxs-lookup"><span data-stu-id="a70a5-261">Application developers can use these tools to make sure depth is being set properly.</span></span>  <span data-ttu-id="a70a5-262">请参阅应用程序工具的文档。</span><span class="sxs-lookup"><span data-stu-id="a70a5-262">Consult the documentation for the application's tools.</span></span>

### <a name="using-planar-reprojection"></a><span data-ttu-id="a70a5-263">使用平面 Reprojection</span><span class="sxs-lookup"><span data-stu-id="a70a5-263">Using Planar Reprojection</span></span>
> [!NOTE]
> <span data-ttu-id="a70a5-264">对于桌面沉浸式耳机，设置稳定面通常会提高效率，因为它提供的视觉质量不如向系统提供应用的深度缓冲区来启用基于深度的 reprojection。</span><span class="sxs-lookup"><span data-stu-id="a70a5-264">For desktop immersive headsets, setting a stabilization plane is usually counter-productive, as it offers less visual quality than providing your app's depth buffer to the system to enable per-pixel depth-based reprojection.</span></span> <span data-ttu-id="a70a5-265">除非在 HoloLens 上运行，否则通常应避免设置稳定平面。</span><span class="sxs-lookup"><span data-stu-id="a70a5-265">Unless running on a HoloLens, you should generally avoid setting the stabilization plane.</span></span>

![三维对象的稳定平面](images/stab-plane-500px.jpg)

<span data-ttu-id="a70a5-267">设备将自动尝试选择此平面，但应用程序应通过选择场景中的焦点来提供帮助。</span><span class="sxs-lookup"><span data-stu-id="a70a5-267">The device will automatically attempt to choose this plane, but the application should assist by selecting the focus point in the scene.</span></span> <span data-ttu-id="a70a5-268">在 HoloLens 上运行的 Unity 应用应根据场景选择最佳关注点，并将其传递到 [SetFocusPoint () ](../unity/focus-point-in-unity.md)。</span><span class="sxs-lookup"><span data-stu-id="a70a5-268">Unity apps running on a HoloLens should choose the best focus point based on your scene and pass it into [SetFocusPoint()](../unity/focus-point-in-unity.md).</span></span> <span data-ttu-id="a70a5-269">默认的旋转多维数据集模板中包含了在 DirectX 中设置焦点的示例。</span><span class="sxs-lookup"><span data-stu-id="a70a5-269">An example of setting the focus point in DirectX is included in the default spinning cube template.</span></span>

<span data-ttu-id="a70a5-270">当你在连接到台式计算机的沉浸式耳机上运行应用时，Unity 将向 Windows 提交深度缓冲区以启用每像素 reprojection，这可提供更好的图像质量，无需应用显式工作。</span><span class="sxs-lookup"><span data-stu-id="a70a5-270">Unity will submit your depth buffer to Windows to enable per-pixel reprojection when you run your app on an immersive headset connected to a desktop PC, which provides even better image quality without explicit work by the app.</span></span> <span data-ttu-id="a70a5-271">仅当应用程序在 HoloLens 上运行时，才应提供焦点，否则会重写每像素 reprojection。</span><span class="sxs-lookup"><span data-stu-id="a70a5-271">You should only provide a Focus Point when your app is running on a HoloLens, or the per-pixel reprojection will be overridden.</span></span>


```cs
// SetFocusPoint informs the system about a specific point in your scene to
// prioritize for image stabilization. The focus point is set independently
// for each holographic camera.
// You should set the focus point near the content that the user is looking at.
// In this example, we put the focus point at the center of the sample hologram,
// since that is the only hologram available for the user to focus on.
// You can also set the relative velocity and facing of that content; the sample
// hologram is at a fixed point so we only need to indicate its position.
renderingParameters.SetFocusPoint(
    currentCoordinateSystem,
    spinningCubeRenderer.Position
    );
```

<span data-ttu-id="a70a5-272">焦点的位置很大程度上取决于全息图所查看的内容。</span><span class="sxs-lookup"><span data-stu-id="a70a5-272">Placement of the focus point largely depends on what the hologram is looking at.</span></span> <span data-ttu-id="a70a5-273">应用具有用于引用的 "注视" 向量，应用设计器知道他们希望用户看到哪些内容。</span><span class="sxs-lookup"><span data-stu-id="a70a5-273">The app has the gaze vector for reference and the app designer knows what content they want the user to observe.</span></span>

<span data-ttu-id="a70a5-274">开发人员可对稳定全息影像执行的最重要的一项操作是以 60 FPS 的帧呈现。</span><span class="sxs-lookup"><span data-stu-id="a70a5-274">The single most important thing a developer can do to stabilize holograms is to render at 60 FPS.</span></span> <span data-ttu-id="a70a5-275">如果低于 60 FPS，将大大减少全息图稳定性，无论是什么稳定性平面优化。</span><span class="sxs-lookup"><span data-stu-id="a70a5-275">Dropping below 60 FPS will dramatically reduce hologram stability, whatever the stabilization plane optimization.</span></span>

<span data-ttu-id="a70a5-276">**最佳做法** 没有通用的方法来设置稳定平面，它是特定于应用的。</span><span class="sxs-lookup"><span data-stu-id="a70a5-276">**Best practices** There's no universal way to set up the stabilization plane and it's app-specific.</span></span> <span data-ttu-id="a70a5-277">我们的主要建议是试验并了解哪种方法最适合你的方案。</span><span class="sxs-lookup"><span data-stu-id="a70a5-277">Our main recommendation is to experiment and see what works best for your scenario.</span></span> <span data-ttu-id="a70a5-278">但是，请尽量将稳定平面与尽可能多的内容对齐，因为此平面上的所有内容都是完美稳定的。</span><span class="sxs-lookup"><span data-stu-id="a70a5-278">However, try to align the stabilization plane with as much content as possible because all the content on this plane is perfectly stabilized.</span></span>

<span data-ttu-id="a70a5-279">例如：</span><span class="sxs-lookup"><span data-stu-id="a70a5-279">For example:</span></span>
* <span data-ttu-id="a70a5-280">如果只有平面内容 (读取应用程序、视频播放应用) ，请将稳定平面与包含内容的平面对齐。</span><span class="sxs-lookup"><span data-stu-id="a70a5-280">If you have only planar content (reading app, video playback app), align the stabilization plane with the plane that has your content.</span></span>
* <span data-ttu-id="a70a5-281">如果有三个小球体处于世界锁定状态，则会使 "稳定" 平面成为当前用户视图中所有球的中心。</span><span class="sxs-lookup"><span data-stu-id="a70a5-281">If there are three small spheres that are world-locked, make the stabilization plane "cut" though the centers of all the spheres that are currently in the user's view.</span></span>
* <span data-ttu-id="a70a5-282">如果场景的内容在深度上非常不同，则更倾向于获取更多对象。</span><span class="sxs-lookup"><span data-stu-id="a70a5-282">If your scene has content at substantially different depths, favor further objects.</span></span>
* <span data-ttu-id="a70a5-283">确保调整每个帧的稳定点，使其与用户正在查看的全息图一致</span><span class="sxs-lookup"><span data-stu-id="a70a5-283">Make sure to adjust the stabilization point every frame to coincide with the hologram the user is looking at</span></span>

<span data-ttu-id="a70a5-284">**要避免的问题** 稳定面是实现稳定的全息影像的极佳工具，但如果误用它，可能会导致严重的映像不稳定。</span><span class="sxs-lookup"><span data-stu-id="a70a5-284">**Things to Avoid** The stabilization plane is a great tool to achieve stable holograms, but if misused it can result in severe image instability.</span></span>
* <span data-ttu-id="a70a5-285">别忘了。</span><span class="sxs-lookup"><span data-stu-id="a70a5-285">Don't "fire and forget".</span></span> <span data-ttu-id="a70a5-286">最终，用户可以使用稳定平面，或将其附加到不再位于用户视图中的对象。</span><span class="sxs-lookup"><span data-stu-id="a70a5-286">You can end up with the stabilization plane behind the user or attached to an object that is no longer in the user's view.</span></span> <span data-ttu-id="a70a5-287">确保稳定平面正常设置为相对于照相机前进 (例如，-摄像) </span><span class="sxs-lookup"><span data-stu-id="a70a5-287">Ensure the stabilization plane normal is set opposite camera-forward (for example, -camera.forward)</span></span>
* <span data-ttu-id="a70a5-288">不要在两个极端之间来回更改稳定平面</span><span class="sxs-lookup"><span data-stu-id="a70a5-288">Don't rapidly change the stabilization plane back and forth between extremes</span></span>
* <span data-ttu-id="a70a5-289">不要将稳定平面设置为固定距离/方向</span><span class="sxs-lookup"><span data-stu-id="a70a5-289">Don't leave the stabilization plane set to a fixed distance/orientation</span></span>
* <span data-ttu-id="a70a5-290">不要让稳定面贯穿用户</span><span class="sxs-lookup"><span data-stu-id="a70a5-290">Don't let the stabilization plane cut through the user</span></span>
* <span data-ttu-id="a70a5-291">在台式计算机上运行时，请勿设置焦点，而不是使用基于像素的深度 reprojection。</span><span class="sxs-lookup"><span data-stu-id="a70a5-291">Don't set the focus point when running on a desktop PC rather than a HoloLens, and instead rely on per-pixel depth-based reprojection.</span></span>

## <a name="color-separation"></a><span data-ttu-id="a70a5-292">颜色分离</span><span class="sxs-lookup"><span data-stu-id="a70a5-292">Color separation</span></span> 

<span data-ttu-id="a70a5-293">由于 HoloLens 显示的性质，有时会出现名为 "颜色分离" 的项目。</span><span class="sxs-lookup"><span data-stu-id="a70a5-293">Because of the nature of HoloLens displays, an artifact called "color-separation" can sometimes be perceived.</span></span> <span data-ttu-id="a70a5-294">它将以图像形式表现为单独的基本颜色（红色、绿色和蓝色）。</span><span class="sxs-lookup"><span data-stu-id="a70a5-294">It manifests as the image separating into individual base colors - red, green, and blue.</span></span> <span data-ttu-id="a70a5-295">当显示白色对象时，项目尤其可见，因为它们有大量的红色、绿色和蓝色。</span><span class="sxs-lookup"><span data-stu-id="a70a5-295">The artifact can be especially visible when displaying white objects, since they have large amounts of red, green, and blue.</span></span> <span data-ttu-id="a70a5-296">当用户以较快的速度在全息帧上移动时，最明显的是用户。</span><span class="sxs-lookup"><span data-stu-id="a70a5-296">It's most pronounced when a user visually tracks a hologram that is moving across the holographic frame at high speed.</span></span> <span data-ttu-id="a70a5-297">项目的另一种方式是对象的扭曲/变形。</span><span class="sxs-lookup"><span data-stu-id="a70a5-297">Another way the artifact can manifest is warping/deformation of objects.</span></span> <span data-ttu-id="a70a5-298">如果对象具有高对比度和/或纯色，如红色、绿色、蓝色，则会将颜色分隔视为对象的不同部分的弯曲。</span><span class="sxs-lookup"><span data-stu-id="a70a5-298">If an object has high contrast and/or pure colors such as red, green, blue, color-separation will be perceived as warping of different parts of the object.</span></span>

<span data-ttu-id="a70a5-299">**打印头锁定空心轮光标的颜色分离的示例可能类似于用户将其头旋转到侧面：**</span><span class="sxs-lookup"><span data-stu-id="a70a5-299">**Example of what the color separation of a head-locked white round cursor could look like as a user rotates their head to the side:**</span></span>

![打印头锁定空心轮光标的颜色分离的示例可能类似于用户将其头旋转到一边。](images/colorseparationofroundwhitecursor-300px.png)

<span data-ttu-id="a70a5-301">尽管很难完全避免颜色分离，但有几种方法可用于缓解这种情况。</span><span class="sxs-lookup"><span data-stu-id="a70a5-301">Though it's difficult to completely avoid color separation, there are several techniques available to mitigate it.</span></span>

<span data-ttu-id="a70a5-302">**可以在以下项上查看颜色分隔：**</span><span class="sxs-lookup"><span data-stu-id="a70a5-302">**Color-separation can be seen on:**</span></span>
* <span data-ttu-id="a70a5-303">正在快速移动的对象，包括 head 锁定对象，如 [光标](../../design/cursors.md)。</span><span class="sxs-lookup"><span data-stu-id="a70a5-303">Objects that are moving quickly, including head-locked objects such as the [cursor](../../design/cursors.md).</span></span>
* <span data-ttu-id="a70a5-304">远离 [稳定平面](hologram-stability.md#reprojection)的对象。</span><span class="sxs-lookup"><span data-stu-id="a70a5-304">Objects that are substantially far from the [stabilization plane](hologram-stability.md#reprojection).</span></span>

<span data-ttu-id="a70a5-305">**衰减颜色分离的效果：**</span><span class="sxs-lookup"><span data-stu-id="a70a5-305">**To attenuate the effects of color-separation:**</span></span>
* <span data-ttu-id="a70a5-306">使对象滞后用户。</span><span class="sxs-lookup"><span data-stu-id="a70a5-306">Make the object lag the user's gaze.</span></span> <span data-ttu-id="a70a5-307">它应显示为具有某种惯性，并附加到注视 "on 弹簧"。</span><span class="sxs-lookup"><span data-stu-id="a70a5-307">It should appear as if it has some inertia and is attached to the gaze "on springs".</span></span> <span data-ttu-id="a70a5-308">此方法降低了光标 (降低分离距离) 并将其放在用户可能的注视点后面。</span><span class="sxs-lookup"><span data-stu-id="a70a5-308">This approach slows the cursor (reducing separation distance) and puts it behind the user's likely gaze point.</span></span> <span data-ttu-id="a70a5-309">只要用户停止改变其看起来就会很自然。</span><span class="sxs-lookup"><span data-stu-id="a70a5-309">So long as it quickly catches up when the user stops shifting their gaze it feels natural.</span></span>
* <span data-ttu-id="a70a5-310">如果你确实想要移动一张全息图，如果你希望用户跟随其眼睛，请尝试将其移动速度保持在5度/秒以下。</span><span class="sxs-lookup"><span data-stu-id="a70a5-310">If you do want to move a hologram, try to keep its movement speed below 5 degrees/second if you expect the user to follow it with their eyes.</span></span>
* <span data-ttu-id="a70a5-311">使用 *光* 而不是 *几何图形* 作为光标。</span><span class="sxs-lookup"><span data-stu-id="a70a5-311">Use *light* instead of *geometry* for the cursor.</span></span> <span data-ttu-id="a70a5-312">附加到注视的虚拟照明源会被视为交互式指针，但不会导致颜色分离。</span><span class="sxs-lookup"><span data-stu-id="a70a5-312">A source of virtual illumination attached to the gaze will be perceived as an interactive pointer but won't cause color-separation.</span></span>
* <span data-ttu-id="a70a5-313">调整 "稳定" 平面，使其与用户正在 gazing 的全息影像匹配。</span><span class="sxs-lookup"><span data-stu-id="a70a5-313">Adjust the stabilization plane to match the holograms the user is gazing at.</span></span>
* <span data-ttu-id="a70a5-314">使对象变为红色、绿色或蓝色。</span><span class="sxs-lookup"><span data-stu-id="a70a5-314">Make the object red, green, or blue.</span></span>
* <span data-ttu-id="a70a5-315">切换到内容的模糊版本。</span><span class="sxs-lookup"><span data-stu-id="a70a5-315">Switch to a blurred version of the content.</span></span> <span data-ttu-id="a70a5-316">例如，可以将一个圆形白色光标更改为在运动方向上稍微模糊的线条。</span><span class="sxs-lookup"><span data-stu-id="a70a5-316">For example, a round white cursor could be changed to a slightly blurred line oriented in the direction of motion.</span></span>

<span data-ttu-id="a70a5-317">与之前一样，在 60 FPS 和设置 "稳定" 平面的情况下，最重要的技术是全息图稳定性。</span><span class="sxs-lookup"><span data-stu-id="a70a5-317">As before, rendering at 60 FPS and setting the stabilization plane are the most important techniques for hologram stability.</span></span> <span data-ttu-id="a70a5-318">如果有明显的颜色分离，请首先确保帧速率符合预期。</span><span class="sxs-lookup"><span data-stu-id="a70a5-318">If facing noticeable color separation, first make sure the frame rate meets expectations.</span></span>

## <a name="see-also"></a><span data-ttu-id="a70a5-319">另请参阅</span><span class="sxs-lookup"><span data-stu-id="a70a5-319">See also</span></span>
* [<span data-ttu-id="a70a5-320">了解混合现实的性能</span><span class="sxs-lookup"><span data-stu-id="a70a5-320">Understanding Performance for Mixed Reality</span></span>](understanding-performance-for-mixed-reality.md)
* [<span data-ttu-id="a70a5-321">颜色、光线和材料</span><span class="sxs-lookup"><span data-stu-id="a70a5-321">Color, light, and materials</span></span>](../../design/color-light-and-materials.md)
* [<span data-ttu-id="a70a5-322">本能交互</span><span class="sxs-lookup"><span data-stu-id="a70a5-322">Instinctual interactions</span></span>](../../design/interaction-fundamentals.md)
* [<span data-ttu-id="a70a5-323">MRTK 全息影像稳定性</span><span class="sxs-lookup"><span data-stu-id="a70a5-323">MRTK Hologram Stabilization</span></span>](/windows/mixed-reality/mrtk-unity/performance/hologram-stabilization)